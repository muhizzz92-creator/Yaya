<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Supermarket Learning Adventure</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Nunito', sans-serif;
    }
    
    /* HIDE SCROLLBARS BUT KEEP SCROLLING */
    .no-scrollbar::-webkit-scrollbar {
      display: none;
    }
    .no-scrollbar {
      -ms-overflow-style: none;  /* IE and Edge */
      scrollbar-width: none;  /* Firefox */
    }
    
    /* Animation classes */
    .bounce-soft { animation: bounce-soft 2s ease-in-out infinite; }
    .wiggle { animation: wiggle 1s ease-in-out infinite; }
    .pulse-glow { animation: pulse-glow 2s ease-in-out infinite; }
    .float { animation: float 3s ease-in-out infinite; }
    .cart-shake { animation: cart-shake 0.5s ease-in-out; }
    
    @keyframes bounce-soft { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }
    @keyframes wiggle { 0%, 100% { transform: rotate(-3deg); } 50% { transform: rotate(3deg); } }
    @keyframes pulse-glow { 0%, 100% { box-shadow: 0 0 5px rgba(255,200,0,0.5); } 50% { box-shadow: 0 0 20px rgba(255,200,0,0.8); } }
    @keyframes float { 0%, 100% { transform: translateY(0) rotate(0deg); } 25% { transform: translateY(-5px) rotate(2deg); } 75% { transform: translateY(5px) rotate(-2deg); } }
    @keyframes cart-shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-3px) rotate(-2deg); } 75% { transform: translateX(3px) rotate(2deg); } }

    .food-item { transition: all 0.3s ease; cursor: pointer; }
    .food-item:hover { transform: scale(1.05); border-color: #10b981; }
    
    .tab-btn { transition: all 0.3s ease; white-space: nowrap; }
    .tab-btn.active { transform: scale(1.05); }

    .story-card { transition: transform 0.3s ease; }
    .story-card:hover { transform: translateY(-5px); }
    
    .category-card { transition: all 0.3s ease; }
    .category-card:hover { transform: translateY(-5px); }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full bg-gradient-to-br from-amber-50 via-orange-50 to-pink-50 overflow-auto">
  <div id="app" class="min-h-full w-full">
   
   <!-- Header -->
   <header class="bg-gradient-to-r from-emerald-500 via-teal-500 to-cyan-500 text-white p-4 shadow-lg">
    <div class="max-w-7xl mx-auto flex items-center justify-between flex-wrap gap-4">
     <div class="flex items-center gap-3">
      <div class="text-4xl bounce-soft">ğŸ›’</div>
      <div>
       <h1 id="store-title" class="text-2xl font-extrabold">Happy Market å¼€å¿ƒè¶…å¸‚</h1>
       <p id="welcome-text" class="text-emerald-100 text-sm">Learn English while shopping! è¾¹è´­ç‰©è¾¹å­¦è‹±è¯­!</p>
      </div>
     </div>
     <div class="bg-white/20 backdrop-blur rounded-2xl p-3 flex items-center gap-3 pulse-glow">
      <div class="text-3xl wiggle">ğŸ‘›</div>
      <div>
       <div class="text-xs text-emerald-100">My Wallet æˆ‘çš„é’±åŒ…</div>
       <div class="flex items-center gap-2">
        <span class="text-2xl font-bold" id="wallet-display">$50.00</span> 
        <button onclick="openWalletModal()" class="bg-yellow-400 text-yellow-800 px-2 py-1 rounded-full text-xs font-bold hover:bg-yellow-300 transition"> Edit ç¼–è¾‘ </button>
       </div>
      </div>
     </div>
    </div>
   </header>
   
   <!-- Navigation Tabs (NO SCROLLBAR) -->
   <nav class="bg-white shadow-md sticky top-0 z-40">
    <div class="max-w-7xl mx-auto flex overflow-x-auto no-scrollbar pb-1">
        <button onclick="switchTab('shop')" id="tab-shop" class="tab-btn active flex-1 py-4 px-6 font-bold text-emerald-600 border-b-4 border-emerald-500 bg-emerald-50 flex items-center justify-center gap-2"> 
            <span class="text-2xl">ğŸª</span> <span>Shop è´­ç‰©</span> 
        </button> 
        <button onclick="switchTab('cart')" id="tab-cart" class="tab-btn flex-1 py-4 px-6 font-bold text-gray-500 border-b-4 border-transparent hover:bg-gray-50 flex items-center justify-center gap-2"> 
            <span class="text-2xl">ğŸ›’</span> <span>Cart (<span id="cart-count">0</span>)</span> 
        </button> 
        <button onclick="switchTab('cooking')" id="tab-cooking" class="tab-btn flex-1 py-4 px-6 font-bold text-gray-500 border-b-4 border-transparent hover:bg-gray-50 flex items-center justify-center gap-2"> 
            <span class="text-2xl">ğŸ‘¨â€ğŸ³</span> <span>Cook çƒ¹é¥ª</span> 
        </button> 
        <button onclick="switchTab('vocab')" id="tab-vocab" class="tab-btn flex-1 py-4 px-6 font-bold text-gray-500 border-b-4 border-transparent hover:bg-gray-50 flex items-center justify-center gap-2"> 
            <span class="text-2xl">ğŸ“š</span> <span>Words è¯æ±‡</span> 
        </button> 
        <button onclick="switchTab('stories')" id="tab-stories" class="tab-btn flex-1 py-4 px-6 font-bold text-gray-500 border-b-4 border-transparent hover:bg-gray-50 flex items-center justify-center gap-2"> 
            <span class="text-2xl">ğŸ“–</span> <span>Stories æ•…äº‹</span> 
        </button>
        <button onclick="switchTab('kitchen')" id="tab-kitchen" class="tab-btn flex-1 py-4 px-6 font-bold text-gray-500 border-b-4 border-transparent hover:bg-gray-50 flex items-center justify-center gap-2"> 
            <span class="text-2xl">ğŸ§Š</span> <span>Kitchen å¨æˆ¿</span> 
        </button>
    </div>
   </nav>

   <main class="max-w-7xl mx-auto p-4 pb-32">
    <!-- Shopping Section -->
    <section id="section-shop" class="space-y-6">
     <!-- Category Cards -->
     <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
        <button onclick="filterCategory('all')" class="category-card bg-gradient-to-br from-purple-400 to-purple-600 text-white p-4 rounded-2xl text-center shadow-lg">
            <div class="text-4xl mb-2">ğŸŒŸ</div>
            <div class="font-bold">All Items</div>
        </button> 
        <button onclick="filterCategory('fruits')" class="category-card bg-gradient-to-br from-red-400 to-orange-500 text-white p-4 rounded-2xl text-center shadow-lg">
            <div class="text-4xl mb-2">ğŸ</div>
            <div class="font-bold">Fruits</div>
        </button> 
        <button onclick="filterCategory('vegetables')" class="category-card bg-gradient-to-br from-green-400 to-emerald-600 text-white p-4 rounded-2xl text-center shadow-lg">
            <div class="text-4xl mb-2">ğŸ¥¬</div>
            <div class="font-bold">Vegetables</div>
        </button> 
        <button onclick="filterCategory('drinks')" class="category-card bg-gradient-to-br from-blue-400 to-cyan-500 text-white p-4 rounded-2xl text-center shadow-lg">
            <div class="text-4xl mb-2">ğŸ¥¤</div>
            <div class="font-bold">Drinks</div>
        </button> 
     </div>
     <!-- Products Grid -->
     <div id="products-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"></div>
    </section>

    <!-- Cart Section -->
    <section id="section-cart" class="hidden space-y-4">
     <div class="bg-white rounded-3xl shadow-xl p-6">
      <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2"><span class="text-3xl">ğŸ›’</span> Shopping Cart è´­ç‰©è½¦</h2>
      <div id="cart-items" class="space-y-3"></div>
      <div id="cart-empty" class="text-center py-12 text-gray-400">
       <div class="text-6xl mb-4">ğŸ›’</div>
       <p class="text-xl">Your cart is empty!</p>
      </div>
      <div id="cart-summary" class="hidden mt-6 pt-6 border-t-2 border-dashed border-gray-200">
       <div class="flex justify-between items-center text-lg mb-2"><span class="text-gray-600">Subtotal:</span> <span id="subtotal" class="font-bold">$0.00</span></div>
       <div class="flex justify-between items-center text-2xl font-bold text-emerald-600"><span>Total:</span> <span id="total">$0.00</span></div>
       <button onclick="clearCart()" class="w-full mt-4 bg-gray-200 text-gray-600 py-3 rounded-xl font-bold hover:bg-gray-300 transition"> Clear Cart </button>
      </div>
     </div>
    </section>

    <!-- Cooking Section -->
    <section id="section-cooking" class="hidden space-y-6">
     <div class="bg-white rounded-3xl shadow-xl p-6">
      <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2"><span class="text-3xl">ğŸ”ª</span> Cooking Actions</h2>
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4" id="cooking-actions"></div>
     </div>
     <div class="bg-white rounded-3xl shadow-xl p-6">
      <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2"><span class="text-3xl">ğŸ“–</span> Simple Recipes</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="recipes-grid"></div>
     </div>
    </section>

    <!-- Vocabulary Section -->
    <section id="section-vocab" class="hidden space-y-6">
     <div class="bg-white rounded-3xl shadow-xl p-6">
      <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2"><span class="text-3xl">ğŸ“š</span> Food Vocabulary</h2>
      <p class="text-gray-500 mb-4 text-sm">Click to listen! ç‚¹å‡»æ”¶å¬!</p>
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4" id="vocab-grid"></div>
     </div>
    </section>

    <!-- NEW STORIES SECTION (UPDATED PROMPTS) -->
    <section id="section-stories" class="hidden space-y-6">
        <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
            <span class="text-3xl">ğŸ“–</span> Mini Stories è¿·ä½ æ•…äº‹
        </h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Story 1 -->
            <div class="story-card bg-white rounded-3xl overflow-hidden shadow-lg border-2 border-emerald-100">
                <div class="aspect-video w-full bg-gray-100 relative">
                    <!-- GEN_IMG: Vector illustration of a cute cartoon girl holding a big yellow banana, clean sharp lines, flat design, white background, vibrant colors, 4k, adobe illustrator style, no blur, high quality -->
                    <img src="PLACEHOLDER" alt="Anna and Banana" class="w-full h-full object-cover">
                </div>
                <div class="p-6">
                    <h3 class="font-bold text-xl text-gray-800 mb-2">Anna likes Bananas</h3>
                    <p class="text-gray-600 mb-4">Anna slices a banana. She likes yellow bananas!</p>
                    
                    <!-- GEN_AUDIO: 
                    [TEACHER]: Anna slices a banana. She likes yellow bananas!
                    -->
                    <audio controls src="PLACEHOLDER" class="w-full"></audio>
                </div>
            </div>

            <!-- Story 2 -->
            <div class="story-card bg-white rounded-3xl overflow-hidden shadow-lg border-2 border-red-100">
                <div class="aspect-video w-full bg-gray-100 relative">
                    <!-- GEN_IMG: Vector illustration of a cute cartoon boy eating a shiny red apple, clean sharp lines, flat design, white background, vibrant colors, 4k, adobe illustrator style, no blur -->
                    <img src="PLACEHOLDER" alt="Tom and Apple" class="w-full h-full object-cover">
                </div>
                <div class="p-6">
                    <h3 class="font-bold text-xl text-gray-800 mb-2">Tom's Red Apple</h3>
                    <p class="text-gray-600 mb-4">Tom has an apple. It is a sweet red apple.</p>
                    
                    <!-- GEN_AUDIO: 
                    [TEACHER]: Tom has an apple. It is a sweet red apple.
                    -->
                    <audio controls src="PLACEHOLDER" class="w-full"></audio>
                </div>
            </div>

            <!-- Story 3 -->
            <div class="story-card bg-white rounded-3xl overflow-hidden shadow-lg border-2 border-blue-100">
                <div class="aspect-video w-full bg-gray-100 relative">
                    <!-- GEN_IMG: Vector illustration of a cute cartoon cat drinking milk from a blue bowl, clean sharp lines, flat design, white background, vibrant colors, 4k, adobe illustrator style, no blur -->
                    <img src="PLACEHOLDER" alt="Cat and Milk" class="w-full h-full object-cover">
                </div>
                <div class="p-6">
                    <h3 class="font-bold text-xl text-gray-800 mb-2">The Thirsty Cat</h3>
                    <p class="text-gray-600 mb-4">The cat drinks milk. Milk is yummy!</p>
                    
                    <!-- GEN_AUDIO: 
                    [TEACHER]: The cat drinks milk. Milk is yummy!
                    -->
                    <audio controls src="PLACEHOLDER" class="w-full"></audio>
                </div>
            </div>

            <!-- Story 4 -->
            <div class="story-card bg-white rounded-3xl overflow-hidden shadow-lg border-2 border-orange-100">
                <div class="aspect-video w-full bg-gray-100 relative">
                    <!-- GEN_IMG: Vector illustration of a cute cartoon girl holding a loaf of bread, clean sharp lines, flat design, white background, vibrant colors, 4k, adobe illustrator style, no blur -->
                    <img src="PLACEHOLDER" alt="Fresh Bread" class="w-full h-full object-cover">
                </div>
                <div class="p-6">
                    <h3 class="font-bold text-xl text-gray-800 mb-2">Fresh Bread</h3>
                    <p class="text-gray-600 mb-4">Mom buys bread. The bread is warm and soft.</p>
                    
                    <!-- GEN_AUDIO: 
                    [TEACHER]: Mom buys bread. The bread is warm and soft.
                    -->
                    <audio controls src="PLACEHOLDER" class="w-full"></audio>
                </div>
            </div>

            <!-- Story 5 -->
            <div class="story-card bg-white rounded-3xl overflow-hidden shadow-lg border-2 border-yellow-100">
                <div class="aspect-video w-full bg-gray-100 relative">
                    <!-- GEN_IMG: Vector illustration of a cute cartoon boy cooking eggs in a pan, clean sharp lines, flat design, white background, vibrant colors, 4k, adobe illustrator style, no blur -->
                    <img src="PLACEHOLDER" alt="Cooking Eggs" class="w-full h-full object-cover">
                </div>
                <div class="p-6">
                    <h3 class="font-bold text-xl text-gray-800 mb-2">Cooking Eggs</h3>
                    <p class="text-gray-600 mb-4">I cook two eggs. One for me, one for you.</p>
                    
                    <!-- GEN_AUDIO: 
                    [TEACHER]: I cook two eggs. One for me, one for you.
                    -->
                    <audio controls src="PLACEHOLDER" class="w-full"></audio>
                </div>
            </div>

            <!-- Story 6 -->
            <div class="story-card bg-white rounded-3xl overflow-hidden shadow-lg border-2 border-pink-100">
                <div class="aspect-video w-full bg-gray-100 relative">
                    <!-- GEN_IMG: Vector illustration of a cute cartoon girl eating ice cream, happy face, clean sharp lines, flat design, white background, vibrant colors, 4k, adobe illustrator style, no blur -->
                    <img src="PLACEHOLDER" alt="Ice Cream Time" class="w-full h-full object-cover">
                </div>
                <div class="p-6">
                    <h3 class="font-bold text-xl text-gray-800 mb-2">Ice Cream Time</h3>
                    <p class="text-gray-600 mb-4">It is hot today. Let's eat ice cream!</p>
                    
                    <!-- GEN_AUDIO: 
                    [TEACHER]: It is hot today. Let's eat ice cream!
                    -->
                    <audio controls src="PLACEHOLDER" class="w-full"></audio>
                </div>
            </div>
        </div>
    </section>

    <!-- Kitchen Section -->
    <section id="section-kitchen" class="hidden space-y-6">
     <div class="bg-white rounded-3xl shadow-xl p-6">
      <div class="flex items-center justify-between mb-4">
       <h2 class="text-2xl font-bold text-gray-800 flex items-center gap-2"><span class="text-3xl">ğŸ§Š</span> My Fridge</h2>
       <button onclick="transferToFridge()" class="bg-emerald-500 text-white px-4 py-2 rounded-xl font-bold hover:bg-emerald-600 transition"> Move Cart to Fridge </button>
      </div>
      <div id="fridge-items" class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-3 min-h-[100px]"></div>
      <div id="fridge-empty" class="text-center py-8 text-gray-400"><div class="text-5xl mb-2">ğŸ§Š</div><p>Fridge is empty!</p></div>
     </div>
     <div class="bg-white rounded-3xl shadow-xl p-6">
      <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2"><span class="text-3xl">ğŸ³</span> What Can I Cook?</h2>
      <div id="recipe-suggestions" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
     </div>
     <!-- Game UI -->
     <div id="cooking-game" class="hidden bg-gradient-to-br from-purple-500 via-pink-500 to-rose-500 rounded-3xl shadow-xl p-6 text-white">
      <div class="flex items-center justify-between mb-6">
       <h2 class="text-2xl font-bold flex items-center gap-2">ğŸ‘¨â€ğŸ³ <span id="game-recipe-name">Cooking...</span></h2>
       <button onclick="exitCookingGame()" class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-xl font-bold transition"> Exit </button>
      </div>
      <div class="bg-white/20 backdrop-blur rounded-3xl p-8 mb-6 relative overflow-hidden min-h-[300px]">
       <div id="cooking-bowl" class="flex flex-wrap justify-center items-center gap-3 pt-20"></div>
       <div id="cooking-status" class="text-center mt-4 text-2xl font-bold">Let's start!</div>
      </div>
      <div class="space-y-3" id="cooking-steps"></div>
      <div id="cooking-complete" class="hidden text-center py-8">
       <div class="text-8xl mb-4 bounce-soft">ğŸ‰</div>
       <h3 class="text-3xl font-bold mb-2">Delicious!</h3>
       <button onclick="exitCookingGame()" class="bg-white text-purple-600 px-8 py-3 rounded-xl font-bold transition"> Cook Another </button>
      </div>
     </div>
    </section>
   </main>

   <!-- Wallet Modal -->
   <div id="wallet-modal" class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-3xl p-6 w-full max-w-md">
     <h3 class="text-2xl font-bold text-gray-800 mb-4">Edit Wallet</h3>
     <div class="flex items-center gap-2 mb-6"><span class="text-3xl font-bold text-gray-400">$</span> <input type="number" id="wallet-input" class="flex-1 text-4xl font-bold text-emerald-600 bg-transparent" value="50.00"></div>
     <div class="flex gap-3"><button onclick="closeWalletModal()" class="flex-1 bg-gray-200 py-3 rounded-xl font-bold">Cancel</button> <button onclick="saveWallet()" class="flex-1 bg-emerald-500 text-white py-3 rounded-xl font-bold">Save</button></div>
    </div>
   </div>

   <!-- Toast -->
   <div id="toast" class="hidden fixed top-24 left-1/2 -translate-x-1/2 bg-emerald-500 text-white px-6 py-3 rounded-full shadow-xl z-50 font-bold"><span class="text-xl mr-2">âœ“</span> <span id="toast-text">Added!</span></div>
   
   <!-- HIDDEN AUDIO BANK (SPLIT INTO CHUNKS TO FIX GENERATION) -->
   <div id="vocab-audio-fruits" class="hidden">
      <!-- GEN_AUDIO: [TEACHER]: Apple. This is an apple. -->
      <audio id="audio-word-1" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Banana. This is a yellow banana. -->
      <audio id="audio-word-2" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Orange. This is a sweet orange. -->
      <audio id="audio-word-3" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Grapes. These are purple grapes. -->
      <audio id="audio-word-4" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Strawberry. This is a red strawberry. -->
      <audio id="audio-word-5" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Peach. This is a juicy peach. -->
      <audio id="audio-word-6" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Cherry. This is a small cherry. -->
      <audio id="audio-word-7" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Kiwi. This is a green kiwi. -->
      <audio id="audio-word-8" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Lemon. This is a sour lemon. -->
      <audio id="audio-word-9" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Watermelon. This is a big watermelon. -->
      <audio id="audio-word-10" src="PLACEHOLDER"></audio>
   </div>
   
   <div id="vocab-audio-veg" class="hidden">
      <!-- GEN_AUDIO: [TEACHER]: Lettuce. This is fresh lettuce. -->
      <audio id="audio-word-11" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Carrot. This is an orange carrot. -->
      <audio id="audio-word-12" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Broccoli. This is green broccoli. -->
      <audio id="audio-word-13" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Tomato. This is a red tomato. -->
      <audio id="audio-word-14" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Cucumber. This is a long cucumber. -->
      <audio id="audio-word-15" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Onion. This is an onion. -->
      <audio id="audio-word-16" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Garlic. This is white garlic. -->
      <audio id="audio-word-17" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Corn. This is yellow corn. -->
      <audio id="audio-word-18" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Potato. This is a brown potato. -->
      <audio id="audio-word-19" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Pepper. This is a spicy pepper. -->
      <audio id="audio-word-20" src="PLACEHOLDER"></audio>
   </div>

   <div id="vocab-audio-drinks" class="hidden">
      <!-- GEN_AUDIO: [TEACHER]: Milk. This is white milk. -->
      <audio id="audio-word-21" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Juice. This is orange juice. -->
      <audio id="audio-word-22" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Soda. This is fizzy soda. -->
      <audio id="audio-word-23" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Water. This is fresh water. -->
      <audio id="audio-word-24" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Tea. This is hot tea. -->
      <audio id="audio-word-25" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Coffee. This is black coffee. -->
      <audio id="audio-word-26" src="PLACEHOLDER"></audio>
   </div>

   <div id="vocab-audio-other" class="hidden">
      <!-- GEN_AUDIO: [TEACHER]: Cheese. This is yellow cheese. -->
      <audio id="audio-word-27" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Eggs. These are white eggs. -->
      <audio id="audio-word-28" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Butter. This is yellow butter. -->
      <audio id="audio-word-29" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Ice Cream. This is sweet ice cream. -->
      <audio id="audio-word-30" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Steak. This is a beef steak. -->
      <audio id="audio-word-31" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Chicken. This is roasted chicken. -->
      <audio id="audio-word-32" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Bacon. This is crispy bacon. -->
      <audio id="audio-word-33" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Pork. This is meat from a pig. -->
      <audio id="audio-word-34" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Fish. This is a blue fish. -->
      <audio id="audio-word-35" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Shrimp. This is a pink shrimp. -->
      <audio id="audio-word-36" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Bread. This is a loaf of bread. -->
      <audio id="audio-word-37" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Croissant. This is a french croissant. -->
      <audio id="audio-word-38" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Bagel. This is a round bagel. -->
      <audio id="audio-word-39" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Cake. This is a birthday cake. -->
      <audio id="audio-word-40" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Cupcake. This is a small cupcake. -->
      <audio id="audio-word-41" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Cookie. This is a chocolate cookie. -->
      <audio id="audio-word-42" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Chocolate. This is a bar of chocolate. -->
      <audio id="audio-word-43" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Candy. This is sweet candy. -->
      <audio id="audio-word-44" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Popcorn. This is salty popcorn. -->
      <audio id="audio-word-45" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Peanuts. These are crunchy peanuts. -->
      <audio id="audio-word-46" src="PLACEHOLDER"></audio>
      <!-- GEN_AUDIO: [TEACHER]: Donut. This is a glazed donut. -->
      <audio id="audio-word-47" src="PLACEHOLDER"></audio>
   </div>
   
  </div>
  <script>
    // JS Logic remains mostly the same, compressed for brevity
    const defaultConfig = { store_name: "Happy Market å¼€å¿ƒè¶…å¸‚", welcome_message: "Learn English while shopping! è¾¹è´­ç‰©è¾¹å­¦è‹±è¯­!", primary_color: "#10b981" };
    let wallet = 50.00;
    let cart = [];
    let fridge = [];
    let currentCategory = 'all';
    let currentCookingRecipe = null;
    let currentCookingStep = 0;

    const products = [
      { id: 1, emoji: 'ğŸ', en: 'Apple', zh: 'è‹¹æœ', price: 1.50, category: 'fruits' },
      { id: 2, emoji: 'ğŸŒ', en: 'Banana', zh: 'é¦™è•‰', price: 0.80, category: 'fruits' },
      { id: 3, emoji: 'ğŸŠ', en: 'Orange', zh: 'æ©™å­', price: 1.20, category: 'fruits' },
      { id: 4, emoji: 'ğŸ‡', en: 'Grapes', zh: 'è‘¡è„', price: 3.50, category: 'fruits' },
      { id: 5, emoji: 'ğŸ“', en: 'Strawberry', zh: 'è‰è“', price: 4.00, category: 'fruits' },
      { id: 6, emoji: 'ğŸ‘', en: 'Peach', zh: 'æ¡ƒå­', price: 2.00, category: 'fruits' },
      { id: 7, emoji: 'ğŸ’', en: 'Cherry', zh: 'æ¨±æ¡ƒ', price: 5.00, category: 'fruits' },
      { id: 8, emoji: 'ğŸ¥', en: 'Kiwi', zh: 'çŒ•çŒ´æ¡ƒ', price: 1.80, category: 'fruits' },
      { id: 9, emoji: 'ğŸ‹', en: 'Lemon', zh: 'æŸ æª¬', price: 0.90, category: 'fruits' },
      { id: 10, emoji: 'ğŸ‰', en: 'Watermelon', zh: 'è¥¿ç“œ', price: 6.00, category: 'fruits' },
      { id: 11, emoji: 'ğŸ¥¬', en: 'Lettuce', zh: 'ç”Ÿèœ', price: 2.50, category: 'vegetables' },
      { id: 12, emoji: 'ğŸ¥•', en: 'Carrot', zh: 'èƒ¡èåœ', price: 1.00, category: 'vegetables' },
      { id: 13, emoji: 'ğŸ¥¦', en: 'Broccoli', zh: 'è¥¿å…°èŠ±', price: 2.80, category: 'vegetables' },
      { id: 14, emoji: 'ğŸ…', en: 'Tomato', zh: 'ç•ªèŒ„', price: 1.50, category: 'vegetables' },
      { id: 15, emoji: 'ğŸ¥’', en: 'Cucumber', zh: 'é»„ç“œ', price: 1.20, category: 'vegetables' },
      { id: 16, emoji: 'ğŸ§…', en: 'Onion', zh: 'æ´‹è‘±', price: 0.80, category: 'vegetables' },
      { id: 17, emoji: 'ğŸ§„', en: 'Garlic', zh: 'å¤§è’œ', price: 0.60, category: 'vegetables' },
      { id: 18, emoji: 'ğŸŒ½', en: 'Corn', zh: 'ç‰ç±³', price: 1.00, category: 'vegetables' },
      { id: 19, emoji: 'ğŸ¥”', en: 'Potato', zh: 'åœŸè±†', price: 0.70, category: 'vegetables' },
      { id: 20, emoji: 'ğŸŒ¶ï¸', en: 'Pepper', zh: 'è¾£æ¤’', price: 1.50, category: 'vegetables' },
      { id: 21, emoji: 'ğŸ¥›', en: 'Milk', zh: 'ç‰›å¥¶', price: 3.50, category: 'drinks' },
      { id: 22, emoji: 'ğŸ§ƒ', en: 'Juice', zh: 'æœæ±', price: 2.50, category: 'drinks' },
      { id: 23, emoji: 'ğŸ¥¤', en: 'Soda', zh: 'æ±½æ°´', price: 1.80, category: 'drinks' },
      { id: 24, emoji: 'ğŸ’§', en: 'Water', zh: 'æ°´', price: 1.00, category: 'drinks' },
      { id: 25, emoji: 'ğŸµ', en: 'Tea', zh: 'èŒ¶', price: 2.00, category: 'drinks' },
      { id: 26, emoji: 'â˜•', en: 'Coffee', zh: 'å’–å•¡', price: 4.50, category: 'drinks' },
      { id: 27, emoji: 'ğŸ§€', en: 'Cheese', zh: 'å¥¶é…ª', price: 5.00, category: 'dairy' },
      { id: 28, emoji: 'ğŸ¥š', en: 'Eggs', zh: 'é¸¡è›‹', price: 3.00, category: 'dairy' },
      { id: 29, emoji: 'ğŸ§ˆ', en: 'Butter', zh: 'é»„æ²¹', price: 4.00, category: 'dairy' },
      { id: 30, emoji: 'ğŸ¦', en: 'Ice Cream', zh: 'å†°æ·‡æ·‹', price: 4.50, category: 'dairy' },
      { id: 31, emoji: 'ğŸ¥©', en: 'Steak', zh: 'ç‰›æ’', price: 12.00, category: 'meat' },
      { id: 32, emoji: 'ğŸ—', en: 'Chicken', zh: 'é¸¡è‚‰', price: 6.00, category: 'meat' },
      { id: 33, emoji: 'ğŸ¥“', en: 'Bacon', zh: 'åŸ¹æ ¹', price: 5.50, category: 'meat' },
      { id: 34, emoji: 'ğŸ–', en: 'Pork', zh: 'çŒªè‚‰', price: 7.00, category: 'meat' },
      { id: 35, emoji: 'ğŸŸ', en: 'Fish', zh: 'é±¼', price: 8.00, category: 'meat' },
      { id: 36, emoji: 'ğŸ¦', en: 'Shrimp', zh: 'è™¾', price: 10.00, category: 'meat' },
      { id: 37, emoji: 'ğŸ', en: 'Bread', zh: 'é¢åŒ…', price: 2.50, category: 'bakery' },
      { id: 38, emoji: 'ğŸ¥', en: 'Croissant', zh: 'ç‰›è§’åŒ…', price: 2.00, category: 'bakery' },
      { id: 39, emoji: 'ğŸ¥¯', en: 'Bagel', zh: 'ç™¾å‰é¥¼', price: 1.50, category: 'bakery' },
      { id: 40, emoji: 'ğŸ‚', en: 'Cake', zh: 'è›‹ç³•', price: 15.00, category: 'bakery' },
      { id: 41, emoji: 'ğŸ§', en: 'Cupcake', zh: 'çº¸æ¯è›‹ç³•', price: 3.00, category: 'bakery' },
      { id: 42, emoji: 'ğŸª', en: 'Cookie', zh: 'é¥¼å¹²', price: 2.50, category: 'snacks' },
      { id: 43, emoji: 'ğŸ«', en: 'Chocolate', zh: 'å·§å…‹åŠ›', price: 3.50, category: 'snacks' },
      { id: 44, emoji: 'ğŸ¬', en: 'Candy', zh: 'ç³–æœ', price: 1.50, category: 'snacks' },
      { id: 45, emoji: 'ğŸ¿', en: 'Popcorn', zh: 'çˆ†ç±³èŠ±', price: 2.00, category: 'snacks' },
      { id: 46, emoji: 'ğŸ¥œ', en: 'Peanuts', zh: 'èŠ±ç”Ÿ', price: 2.50, category: 'snacks' },
      { id: 47, emoji: 'ğŸ©', en: 'Donut', zh: 'ç”œç”œåœˆ', price: 1.80, category: 'snacks' },
    ];

    const cookingActions = [
      { emoji: 'ğŸ”ª', en: 'Cut', zh: 'åˆ‡' }, { emoji: 'ğŸ¥£', en: 'Mix', zh: 'æ··åˆ' },
      { emoji: 'ğŸ³', en: 'Fry', zh: 'ç…' }, { emoji: 'â™¨ï¸', en: 'Boil', zh: 'ç…®' }
    ];

    const detailedRecipes = [
      {
        id: 'fruit-salad', name: 'Fruit Salad æ°´æœæ²™æ‹‰', emoji: 'ğŸ¥—', container: 'ğŸ¥—',
        requiredIngredients: ['Apple', 'Banana'], optionalIngredients: ['Orange', 'Grapes'],
        steps: [{ action: 'cut', text: 'Cut fruits', emoji: 'ğŸ”ª', verb: 'Cut' }, { action: 'mix', text: 'Mix in bowl', emoji: 'ğŸ¥£', verb: 'Mix' }]
      }
    ];

    function playProductAudio(id) {
        const audioElement = document.getElementById(`audio-word-${id}`);
        if (audioElement) { audioElement.play(); }
    }

    function renderProducts() {
      const grid = document.getElementById('products-grid');
      const filtered = currentCategory === 'all' ? products : products.filter(p => p.category === currentCategory);
      grid.innerHTML = filtered.map(product => `
        <div class="food-item bg-white rounded-2xl p-4 shadow-lg text-center relative" onclick="addToCart(${product.id}); playProductAudio(${product.id});">
          <div class="absolute top-2 right-2 text-gray-300 opacity-50 text-xs">ğŸ”Š</div>
          <div class="text-5xl mb-2 float">${product.emoji}</div>
          <div class="font-bold text-gray-800">${product.en}</div>
          <div class="text-gray-500 text-sm">${product.zh}</div>
          <div class="mt-2 bg-emerald-100 text-emerald-700 rounded-full py-1 px-3 text-sm font-bold inline-block">$${product.price.toFixed(2)}</div>
        </div>
      `).join('');
    }

    function renderCart() {
      const itemsEl = document.getElementById('cart-items');
      const countEl = document.getElementById('cart-count');
      countEl.textContent = cart.reduce((sum, item) => sum + item.qty, 0);
      
      if (cart.length === 0) {
        itemsEl.innerHTML = '';
        document.getElementById('cart-empty').classList.remove('hidden');
        document.getElementById('cart-summary').classList.add('hidden');
        return;
      }
      document.getElementById('cart-empty').classList.add('hidden');
      document.getElementById('cart-summary').classList.remove('hidden');
      
      itemsEl.innerHTML = cart.map(item => `
        <div class="cart-item flex items-center gap-4 bg-gray-50 rounded-2xl p-4">
          <div class="text-4xl">${item.emoji}</div>
          <div class="flex-1">
            <div class="font-bold text-gray-800">${item.en}</div>
            <div class="text-emerald-600 font-bold">$${item.price.toFixed(2)}</div>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-8 text-center font-bold">x${item.qty}</span>
          </div>
        </div>
      `).join('');
      const total = cart.reduce((sum, item) => sum + item.price * item.qty, 0);
      document.getElementById('total').textContent = `$${total.toFixed(2)}`;
    }

    function switchTab(tab) {
      ['shop', 'cart', 'cooking', 'vocab', 'kitchen', 'stories'].forEach(t => {
        document.getElementById(`section-${t}`).classList.add('hidden');
        document.getElementById(`tab-${t}`).classList.remove('active', 'text-emerald-600', 'border-emerald-500');
        document.getElementById(`tab-${t}`).classList.add('text-gray-500', 'border-transparent');
      });
      document.getElementById(`section-${tab}`).classList.remove('hidden');
      document.getElementById(`tab-${tab}`).classList.add('active', 'text-emerald-600', 'border-emerald-500');
      document.getElementById(`tab-${tab}`).classList.remove('text-gray-500', 'border-transparent');
    }

    function filterCategory(category) { currentCategory = category; renderProducts(); }

    function addToCart(productId) {
      const product = products.find(p => p.id === productId);
      const existing = cart.find(item => item.id === productId);
      if (existing) { existing.qty++; } else { cart.push({ ...product, qty: 1 }); }
      renderCart();
      const toast = document.getElementById('toast');
      toast.classList.remove('hidden');
      setTimeout(() => toast.classList.add('hidden'), 1000);
    }
    
    function clearCart() { cart = []; renderCart(); }
    
    // Init
    renderProducts();
    renderCart();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9bfe100c61fc20e9',t:'MTc2ODczODk5Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>